*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font-family);
  background: var(--surface-secondary);
  padding: 0;
}

/* ─── Root frame ─────────────────────────────────────── */
.frame-root {
  display: flex;
  width: 100%;
  height: 100vh;
  overflow: hidden;
}

/* ─── Left Sidebar (nav) ──────────────────────────────── */
.sidebar-nav {
  width: 252px;
  max-width: 252px;
  min-width: 180px;
  height: 100%;
  flex-shrink: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 6px;
  transition: width 0.2s ease, min-width 0.2s ease;
}

.sidebar-nav.collapsed {
  width: fit-content;
  min-width: 0;
  max-width: none;
  padding: 6px 0;
}

/* Hide text/badges/subitems when collapsed */
.sidebar-nav.collapsed .snav-workspace-btn { display: none; }
.sidebar-nav.collapsed .snav-label { display: none; }
.sidebar-nav.collapsed .snav-badge-wrap { display: none; }
.sidebar-nav.collapsed .snav-chevron { display: none; }
.sidebar-nav.collapsed .snav-subitems { display: none; }
.sidebar-nav.collapsed .snav-user-name { max-width: 0; opacity: 0; overflow: hidden; padding: 0; margin: 0; }

/* Center icons in collapsed state */
.sidebar-nav.collapsed .snav-header { justify-content: center; }
.sidebar-nav.collapsed .snav-links { padding: 6px; gap: 2px; }
.sidebar-nav.collapsed .snav-link {
  padding: 6px;
  justify-content: center;
}
.sidebar-nav.collapsed .snav-footer { padding: 6px; display: flex; justify-content: center; }
.sidebar-nav.collapsed .snav-user-btn {
  padding: 4px;
  width: 28px;
}

/* Header */
.snav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 44px;
  padding: 0 6px;
  flex-shrink: 0;
}

.snav-workspace-btn {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  padding: 4px;
  border-radius: 8px;
  cursor: pointer;
  background: transparent;
  border: none;
  font-family: var(--font-family);
}

.snav-workspace-btn:hover { background: var(--surface-tint); }

.snav-workspace-avatar {
  width: 20px;
  height: 20px;
  border-radius: 5px;
  flex-shrink: 0;
  overflow: hidden;
}

.snav-workspace-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
  padding: 0 4px;
}


/* Link sections */
.snav-links {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 6px 6px 12px;
  flex-shrink: 0;
}

.snav-links.grow {
  flex: 1;
  min-height: 0;
  padding: 12px 6px;
}

.snav-links.mid { padding: 12px 6px; }

.snav-divider {
  height: 1px;
  background: var(--stroke-primary);
  flex-shrink: 0;
  margin: 0 14px;
}

/* Nav item (top-level) */
.snav-item {
  display: flex;
  align-items: center;
  border-radius: 6px;
  cursor: pointer;
  width: 100%;
}

.snav-link {
  display: flex;
  flex: 1;
  align-items: center;
  gap: 6px;
  padding: 4px 6px 4px 4px;
  border-radius: 6px;
  min-width: 0;
  height: 28px;
}

.snav-item:hover .snav-link { background: var(--surface-tint); }

.snav-icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  padding: 2px;
}

.snav-icon svg { width: 16px; height: 16px; color: var(--content-tertiary); fill: none; }
.snav-icon img { width: 16px; height: 16px; filter: var(--icon-filter); }

.snav-label {
  font-size: 14px;
  font-weight: 400;
  color: var(--content-secondary);
  letter-spacing: -0.28px;
  line-height: 20px;
  white-space: nowrap;
}

.snav-sublink .snav-label { flex: 1; }

.snav-chevron { width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.snav-chevron svg { width: 16px; height: 16px; color: var(--content-tertiary); fill: none; }
.snav-chevron img { filter: var(--icon-filter); }

.snav-subitems.collapsed { display: none; }

/* Sub-items */
.snav-subitems {
  display: flex;
  flex-direction: column;
  gap: 1px;
  padding-bottom: 12px;
}

.snav-subitem {
  display: flex;
  align-items: center;
  width: 100%;
  cursor: pointer;
}

/* Tree line: vertical + horizontal connector */
.snav-tree {
  width: 26px;
  height: 28px;
  flex-shrink: 0;
  position: relative;
}

.snav-tree::before {
  content: '';
  position: absolute;
  left: 13px; top: 0; bottom: -1px;
  width: 1px;
  background: var(--stroke-secondarystrong);
}

/* Last sub-item: vertical line only down to midpoint */
.snav-subitem:last-child .snav-tree::before { bottom: 50%; }

.snav-sublink {
  display: flex;
  flex: 1;
  align-items: center;
  gap: 6px;
  padding: 4px 6px 4px 4px;
  border-radius: 6px;
  height: 28px;
  min-width: 0;
  justify-content: space-between;
}

.snav-subitem:hover .snav-sublink { background: var(--surface-tint); }
.snav-subitem.active .snav-sublink { background: var(--surface-tint); }

/* Badge */
.snav-badge-wrap { display: flex; align-items: center; flex-shrink: 0; margin-left: auto; }

.snav-badge {
  height: 16px;
  min-width: 16px;
  padding: 2px 4px;
  border-radius: 4px;
  background: var(--surface-tint);
  border: 1px solid var(--stroke-primary);
  display: flex;
  align-items: center;
  justify-content: center;
}

.snav-badge span {
  font-size: 10px;
  font-weight: 600;
  color: var(--content-tertiary);
  line-height: 12px;
  white-space: nowrap;
}

/* User profile footer */
.snav-footer { padding: 6px; flex-shrink: 0; }

.snav-user-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 6px 4px 4px;
  border-radius: 8px;
  cursor: pointer;
  background: transparent;
  border: none;
  font-family: var(--font-family);
  text-align: left;
  transition: padding 0.2s ease;
}

.snav-user-btn:hover { background: var(--surface-tint); }

.snav-user-avatar {
  width: 20px;
  height: 20px;
  border-radius: 999px;
  background: var(--utilities-surface-bluesubtle);
  color: var(--utilities-content-onsoft-blue);
  flex-shrink: 0;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-family);
  font-size: 10px;
  font-weight: 600;
  line-height: 12px;
  user-select: none;
  -webkit-font-smoothing: antialiased;
}

.snav-online-dot {
  position: absolute;
  bottom: -1px; right: -1px;
  width: 6px; height: 6px;
  border-radius: 999px;
  background: var(--content-success);
  outline: 1.5px solid var(--surface-secondary);
}

.snav-user-name {
  font-size: 14px;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
  white-space: nowrap;
  overflow: hidden;
  max-width: 160px;
  opacity: 1;
  transition: max-width 0.2s ease, opacity 0.15s ease;
}

/* ─── Content area ─────────────────────────────────────── */
.content {
  position: relative;
  flex: 1;
  display: flex;
  height: calc(100% - 8px);
  overflow: hidden;
  border-radius: 8px;
  margin: 4px 4px 4px 0;
  border: 1px solid var(--stroke-secondarystrong);
  background: var(--surface-primary);
}

/* ─── Empty state: no conversation selected ────────────── */

#dialog-empty {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface-primary);
}

#dialog-loading {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface-primary);
  z-index: 10;
}

/* Hide dialog + copilot when nothing is selected */
.content:not(.has-selection) .dialog,
.content:not(.has-selection) .copilot {
  display: none;
}

/* Hide empty state once a conversation is selected */
.content.has-selection #dialog-empty,
.content.has-selection #dialog-loading {
  display: none;
}



/* Loading state: show loading, hide empty + hide sidebar badges */
body.is-loading .content #dialog-empty {
  display: none;
}
body.is-loading .snav-badge-wrap {
  visibility: hidden;
}

/* Not loading: hide loading panel */
body:not(.is-loading) .content #dialog-loading {
  display: none;
}

/* ─── Inbox Sidebar ────────────────────────────────────── */
.inbox-sidebar {
  position: relative;
  z-index: 2;
  width: 332px;
  max-width: 70vw;
  min-width: 220px;
  flex-shrink: 1;
  border-right: 1px solid var(--stroke-primary);
  display: flex;
  flex-direction: column;
  height: 100%;
  transition: border-right-color 0.1s;
}

.inbox-sidebar:has(.isb-resize-zone:hover) {
  border-right-color: var(--stroke-accentsoft);
  transition: border-right-color 0.1s 200ms;
}

.isb-resize-zone {
  position: absolute;
  top: 0;
  right: -5px;
  width: 9px;
  height: 100%;
  cursor: col-resize;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
}

.isb-resize-handle {
  width: 7px;
  height: 10px;
  border-radius: 2px;
  background: var(--surface-primary);
  border: 1px solid var(--stroke-accentsoft);
  box-shadow: var(--shadow-e1);
  opacity: 0;
  pointer-events: none;
  flex-shrink: 0;
  transition: opacity 0.1s;
}

.isb-resize-zone:hover .isb-resize-handle {
  opacity: 1;
  transition: opacity 0.1s 200ms;
}

/* ─── Inbox Sidebar inner ───────────────────────────────── */
.isb-topbar {
  height: 44px;
  display: flex;
  align-items: center;
  border-bottom: 1px solid var(--stroke-primary);
  background: var(--surface-primary);
  flex-shrink: 0;
}

.isb-title-wrap {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  min-width: 0;
}

.isb-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
  white-space: nowrap;
}

.isb-actions {
  display: flex;
  gap: 4px;
  align-items: center;
  padding: 6px;
  flex-shrink: 0;
}


.isb-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1px;
  padding: 4px;
}

.isb-item {
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  background: var(--surface-primary);
}
.isb-item:hover { background: var(--surface-tint); }
.isb-item.active { background: var(--surface-tint); }

.isb-avatar-wrap {
  position: relative;
  width: 28px;
  height: 28px;
  flex-shrink: 0;
}

.isb-avatar {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--stroke-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-family);
  font-size: 10px;
  font-weight: 600;
  line-height: 12px;
  overflow: hidden;
  flex-shrink: 0;
  user-select: none;
  -webkit-font-smoothing: antialiased;
}

.isb-channel {
  position: absolute;
  bottom: -3px;
  right: -3px;
  width: 16px;
  height: 16px;
  border-radius: 999px;
  background: var(--surface-primary);
  border: 1px solid var(--stroke-primary);
  display: flex;
  align-items: center;
  justify-content: center;
}
.isb-channel svg { width: 10px; height: 10px; }
.isb-channel img { width: 12px; height: 12px; filter: var(--icon-filter); }

.isb-message {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}

.isb-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.isb-name {
  font-size: 12px;
  font-weight: 500;
  color: var(--content-secondary);
  line-height: 16px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.isb-time {
  font-size: 12px;
  color: var(--content-quartenary);
  line-height: 16px;
  flex-shrink: 0;
  margin-left: 4px;
}

.isb-bottom-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.isb-quote-bar {
  width: 2px;
  height: 14px;
  border-radius: 2px;
  background: var(--content-warning);
  flex-shrink: 0;
}

.isb-preview {
  font-size: 14px;
  color: var(--content-tertiary);
  line-height: 20px;
  letter-spacing: -0.28px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
}

.isb-badge {
  height: 16px;
  min-width: 16px;
  padding: 2px 4px;
  border-radius: 4px;
  background: var(--surface-tint);
  border: 1px solid var(--stroke-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 600;
  color: var(--content-tertiary);
  line-height: 12px;
  flex-shrink: 0;
}

/* ─── Dialog (Chat) ────────────────────────────────────── */
.dialog {
  flex: 1;
  min-width: 0;
  border-right: 1px solid var(--stroke-primary);
  display: flex;
  flex-direction: column;
  height: 100%;
  position: relative;
  z-index: 1;
  transition: border-right-color 0.1s;
  padding-bottom: 116px; /* reserve space for absolute-positioned composer */
  background: var(--surface-secondary);
}

.dialog:has(.cop-resize-zone:hover) {
  border-right-color: var(--stroke-accentsoft);
  transition: border-right-color 0.1s 200ms;
}

.cop-resize-zone {
  position: absolute;
  top: 0;
  right: -5px;
  width: 9px;
  height: 100%;
  cursor: col-resize;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cop-resize-handle {
  width: 7px;
  height: 8px;
  border-radius: 2px;
  background: var(--surface-primary);
  border: 1px solid var(--stroke-accentsoft);
  box-shadow: var(--shadow-e1);
  opacity: 0;
  pointer-events: none;
  flex-shrink: 0;
  transition: opacity 0.1s;
}

.cop-resize-zone:hover .cop-resize-handle {
  opacity: 1;
  transition: opacity 0.1s 200ms;
}

.dialog-topbar {
  height: 44px;
  border-bottom: 1px solid var(--stroke-primary);
  display: flex;
  align-items: center;
  padding: 0 8px 0 16px;
  flex-shrink: 0;
  z-index: 3;
  background: var(--surface-primary);
}

.dialog-topbar.copilot-closed { padding-right: 0; }

.dialog-title {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
}

.msg-author-logo { flex-shrink: 0; }
.msg-author-logo img { filter: invert(1); }

.avatar-16 {
  width: 16px;
  height: 16px;
  border-radius: 999px;
  border: 1px solid var(--stroke-primary);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-family);
  font-size: 10px;
  font-weight: 600;
  line-height: 12px;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  overflow: hidden;
}

.dialog-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--content-primary);
  letter-spacing: -0.28px;
}

.topbar-actions {
  display: flex;
  align-items: center;
  gap: 2px;
}


/* ─── Chat messages ─────────────────────────────────────── */
.dialog-content {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  background: var(--surface-secondary);
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  z-index: 2;
}

.chat-scroll {
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 24px 20px 20px;
  max-width: 1200px;
  width: 100%;
  align-self: center;
}

.date-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 0 4px;
}

.date-line {
  flex: 1;
  height: 1px;
  background: var(--stroke-primary);
}

.date-label {
  font-size: 12px;
  color: var(--content-secondary);
  line-height: 16px;
}

.system-alert {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 4px 0;
  font-size: 12px;
  color: var(--content-secondary);
  line-height: 16px;
}

.system-alert strong { font-weight: 500; }

.chat-scroll .da { margin: 4px 0 28px; }

.msg-wrapper {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-bottom: 2px;
}

.msg-wrapper.outbound { align-items: flex-end; }
.msg-wrapper.inbound  { align-items: flex-start; }

.msg-bubble {
  max-width: 88%;
  border-radius: 8px 8px 4px 8px;
  border: 1px solid var(--stroke-primary);
  overflow: hidden;
}

.msg-wrapper.inbound .msg-bubble {
  border-radius: 8px 8px 8px 4px;
  background: var(--surface-tint);
  border: none;
}

.msg-wrapper.outbound .msg-bubble {
  background: var(--button-accent);
  box-shadow: var(--shadow-e1);
}

.msg-wrapper.outbound .msg-bubble.note {
  border-radius: 8px 8px 4px 8px;
  border: 1px solid var(--stroke-internalnote);
  background: var(--surface-internalnote);
  box-shadow: none;
}

.msg-wrapper.outbound .msg-bubble.note .msg-body {
  color: var(--content-primary);
}

.msg-author {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 10px 0;
}

.msg-author-name {
  font-size: 12px;
  color: var(--content-onaccent);
  line-height: 16px;
}

.msg-body {
  padding: 8px 10px;
  font-size: 14px;
  line-height: 20px;
  letter-spacing: -0.28px;
}

.msg-wrapper.outbound .msg-body { color: var(--content-onaccent); }
.msg-wrapper.inbound  .msg-body { color: var(--content-primary); }

.msg-time {
  font-size: 12px;
  color: var(--content-quartenary);
  line-height: 16px;
  padding: 0 4px;
  visibility: hidden;
}

.msg-wrapper:hover .msg-time { visibility: visible; }

/* ─── Composer ──────────────────────────────────────────── */
.composer-back-to-bottom {
  display: none;
  justify-content: center;
  width: 100%;
  margin-bottom: 6px;
}

.composer-back-to-bottom.is-visible {
  display: flex;
}

.composer-wrap {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 14px;
  background: linear-gradient(180deg, transparent 0%, var(--surface-secondary) 88%);
  z-index: 10;
}

@keyframes composer-shake {
  0%, 100% { transform: translateX(0); }
  20%       { transform: translateX(-5px); }
  40%       { transform: translateX(5px); }
  60%       { transform: translateX(-4px); }
  80%       { transform: translateX(4px); }
}

@keyframes nudge-down {
  0%   { transform: translateY(0); }
  40%  { transform: translateY(6px); }
  70%  { transform: translateY(-1px); }
  100% { transform: translateY(0); }
}

@keyframes nudge-up {
  0%   { transform: translateY(0); }
  40%  { transform: translateY(-6px); }
  70%  { transform: translateY(1px); }
  100% { transform: translateY(0); }
}

.composer {
  background: var(--surface-popover);
  border: 1px solid var(--stroke-primary);
  border-radius: 8px;
  box-shadow: var(--shadow-e1);
  overflow: hidden;
  max-width: 1200px;
  width: 100%;
  margin: 0 auto;
}

.composer.is-shake {
  animation: composer-shake 0.35s ease;
}

.composer.is-nudge {
  animation: nudge-down 0.5s ease-out;
}

.dialog-topbar.is-nudge {
  animation: nudge-up 0.5s ease-out;
}

.composer-input {
  min-height: 60px;
  max-height: 180px;
  overflow-y: auto;
  padding: 10px 12px;
  font-size: 14px;
  color: var(--content-primary);
  line-height: 16px;
  letter-spacing: -0.28px;
  outline: none;
  caret-color: var(--content-accent);
}

.composer-input:empty::before {
  content: 'Write your answer…';
  color: var(--content-quartenary);
  pointer-events: none;
}

.composer.internal-note .composer-input:empty::before {
  content: 'Leave an internal note…';
}

.composer-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px;
}

.composer-left { display: flex; align-items: center; gap: 4px; }
.composer-right { display: flex; align-items: center; gap: 4px; }

.toggle-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px 6px 6px;
  border-radius: 6px;
}

.toggle {
  width: 24px;
  height: 16px;
  border-radius: 999px;
  background: var(--surface-tintstrong);
  position: relative;
  flex-shrink: 0;
}

.toggle-thumb {
  position: absolute;
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 999px;
  top: 2px;
  left: 2px;
  box-shadow: var(--shadow-toggle);
  transition: left 0.2s;
}

.toggle { cursor: pointer; }
.toggle.on { background: var(--button-accent); }
.toggle.on .toggle-thumb { left: 10px; }

.composer.internal-note {
  background: var(--surface-internalnote);
  border-color: var(--stroke-internalnote);
}

.toggle-label { font-size: 12px; color: var(--content-secondary); line-height: 16px; }

.v-divider {
  width: 1px;
  height: 16px;
  background: var(--stroke-primary);
}


/* ─── Copilot panel ─────────────────────────────────────── */
.copilot {
  width: 332px;
  max-width: 70vw;
  min-width: 220px;
  flex-shrink: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--surface-primary);
  position: relative;
  overflow: hidden;
  transition: width 0.2s ease, min-width 0.2s ease;
  padding-bottom: 54px; /* reserve space for absolute-positioned composer */
}

.copilot.collapsed {
  width: 0;
  min-width: 0;
  border-left: none;
}

/* Tabs */
.copilot-tabs {
  display: flex;
  align-items: stretch;
  border-bottom: 1px solid var(--stroke-primary);
  height: 44px;
  flex-shrink: 0;
}

.tabs-list {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 4px 16px 0 16px;
  flex: 1;
}

.tab {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 0 10px;
  cursor: pointer;
  position: relative;
  font-size: 14px;
  color: var(--content-tertiary-transparent);
  letter-spacing: -0.28px;
  line-height: 20px;
  white-space: nowrap;
}

.tab.active { color: var(--content-primary); }

.tab.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: -1px;
  right: -1px;
  height: 1px;
  background: var(--stroke-accent);
  border-radius: 2px;
}

.copilot-tab-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px;
}

/* Copilot content */
.copilot-content {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.copilot-scroll {
  position: relative;
  flex: 1;
  height: 100%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 18px 12px 20px;
}

.copilot-empty-state {
  display: none;
  flex: 1;
  width: 100%;
  align-items: center;
  justify-content: center;
}

#copilot-scroll:empty {
  flex: 0;
  padding: 0;
}

#copilot-scroll:empty + .copilot-empty-state {
  display: flex;
}

/* User message in copilot chat */
.copilot-user-msg {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  align-self: flex-end;
  max-width: 276px;
  padding: 8px 10px;
  border-radius: 8px 8px 4px 8px;
  background: var(--surface-tint);
  font-size: 14px;
  color: var(--content-primary);
  line-height: 20px;
  letter-spacing: -0.28px;
  word-break: break-word;
}

/* AI Copilot message block */
.ai-block {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
}

.ai-reasoning {
  display: flex;
  flex-direction: column;
  gap: 4px;
}


.reasoning-message {
  display: none;
  padding: 0 6px;
  font-size: 14px;
  font-weight: 400;
  color: var(--content-tertiary);
  line-height: 20px;
  letter-spacing: -0.28px;
}

.reasoning-message p {
  margin: 0 0 8px;
}
.reasoning-message p:last-child { margin-bottom: 0; }

.reasoning-message ul,
.reasoning-message ol {
  margin: 0 0 8px;
  padding-left: 16px;
}

.reasoning-message li {
  margin-bottom: 2px;
}

.reasoning-sources {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 8px;
}

.reasoning-source {
  display: inline-flex;
  align-items: center;
  height: 20px;
  padding: 0 6px;
  border-radius: 4px;
  border: 1px solid var(--stroke-primary);
  font-size: 11px;
  font-weight: 500;
  color: var(--content-tertiary);
  text-decoration: none;
  white-space: nowrap;
}
.reasoning-source:hover {
  background: var(--surface-secondary);
  color: var(--content-primary);
}

.ai-message {
  padding: 0 8px;
}

.ai-message p {
  font-size: 14px;
  font-weight: 400;
  color: var(--content-primary);
  line-height: 20px;
  letter-spacing: -0.28px;
}

.ai-cards {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 0 2px;
}

/* Ticket summary card */
.card {
  background: var(--surface-secondary);
  border: 1px solid var(--stroke-primary);
  border-radius: 8px;
  overflow: hidden;
  width: 100%;
}

.card.elevated {
  background: var(--surface-secondary);
}

.card-summary {
  padding: 10px 12px 4px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.card-summary-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
}

.card-summary-text {
  font-size: 14px;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
}

.card-details {
  padding: 0 12px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.card-detail-item {
  font-size: 14px;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
}

.card-detail-item strong { font-weight: 500; }

/* Internal tip */
.internal-tip {
  margin: 0 4px 4px;
  background: var(--surface-internalnote);
  border: 1px solid var(--stroke-internalnote);
  border-radius: 8px;
  padding: 10px 12px 10px 10px;
  display: flex;
  gap: 6px;
  align-items: flex-start;
}

.internal-tip-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  margin-top: 2px;
  color: var(--content-internalnote);
}

.internal-tip-text {
  font-size: 14px;
  color: var(--content-internalnote);
  line-height: 20px;
  letter-spacing: -0.28px;
}

/* Suggestion reply card */
.card-header {
  display: flex;
  align-items: center;
  padding: 10px 12px 8px;
  gap: 4px;
}

.card-label {
  flex: 1;
  font-size: 12px;
  color: var(--content-tertiary-transparent);
  line-height: 16px;
}

.confidence-badge {
  display: flex;
  align-items: center;
  gap: 2px;
  height: 16px;
}

.confidence-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--content-success);
}

.confidence-text {
  font-size: 12px;
  color: var(--content-success);
  line-height: 16px;
}

.card-body {
  padding: 0 12px 10px;
}

.card-details-header {
  padding: 0 6px 6px;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.card-details-header.is-open {
  gap: 4px;
}

.card-details-header .btn {
  color: var(--content-tertiary);
}

.card-details-body {
  display: none;
  padding: 0 6px 4px;
}

.card-details-body p {
  font-size: 14px;
  font-weight: 400;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
}

.card-body p {
  font-size: 14px;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 20px;
}

.card-divider {
  height: 1px;
  background: var(--stroke-primary);
}

.card-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.card-actions-left {
  display: flex;
  align-items: center;
  padding: 6px;
  gap: 0;
  height: 40px;
  flex: 1;
}

.card-actions-right {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px;
  height: 40px;
}


/* Action suggestion */
.card-footer-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  height: 40px;
  padding: 6px;
}


/* Thinking section */
.thinking-section {
  display: flex;
  flex-direction: column;
  width: 100%;
  min-height: 260px;
  flex-shrink: 0;
}

.thinking-label {
  display: flex;
  align-items: center;
  gap: 8px;
  height: 24px;
  padding: 0 6px;
  margin-bottom: 8px;
  font-size: 12px;
  font-weight: 500;
  line-height: 20px;
  color: var(--content-tertiary);
}

.thinking-label img {
  filter: var(--icon-filter);
}

.thinking-dots {
  margin-left: -6px;
}

.thinking-dots span {
  display: inline-block;
  opacity: 0.1;
  animation: thinkingDot 1s ease-in-out infinite;
}
.thinking-dots span:nth-child(2) { animation-delay: 0.15s; }
.thinking-dots span:nth-child(3) { animation-delay: 0.3s; }

@keyframes thinkingDot {
  0%, 100% { transform: translateY(0);   opacity: 0.1; }
  40%       { transform: translateY(-1.5px); opacity: 1; }
  70%       { transform: translateY(0);   opacity: 0.1; }
}

.thinking-steps {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.thinking-step {
  display: flex;
  align-items: center;
  gap: 6px;
  min-height: 24px;
  padding: 0 6px;
}

.thinking-step-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  position: relative;
}

.thinking-step-icon::after {
  content: '';
  position: absolute;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--content-tertiary-transparent);
  top: 4.5px;
  left: 4.5px;
}

.thinking-step-text {
  font-size: 12px;
  font-weight: 500;
  line-height: 16px;
  color: var(--content-tertiary-transparent);
  overflow: hidden;
  white-space: nowrap;
  max-width: 0;
  animation: typingStep 0.6s steps(25, end) forwards;
}

@keyframes typingStep {
  to { max-width: 260px; }
}

.thinking-connector {
  padding: 0 6px;
  animation: stepFadeIn 0.3s ease forwards;
}

.thinking-connector::after {
  content: '';
  display: block;
  width: 1px;
  height: 12px;
  background: var(--stroke-primary);
  margin-left: 7.5px;
}


@keyframes stepFadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Copilot composer */
.copilot-back-to-bottom {
  display: none;
  justify-content: center;
  width: 100%;
  margin-bottom: 6px;
}

.copilot-back-to-bottom.is-visible {
  display: flex;
}

.copilot-composer {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 14px;
  background: linear-gradient(180deg, transparent 0%, var(--surface-secondary) 88%);
}

.copilot-input {
  background: var(--surface-popover);
  border: 1px solid var(--stroke-primary);
  border-radius: 8px;
  box-shadow: var(--shadow-e1);
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 6px;
  padding: 0 6px 0 0;
  max-height: 180px;
}

.copilot-editable {
  flex: 1;
  min-width: 0;
  display: block;
  font-family: var(--font-family);
  font-size: 14px;
  color: var(--content-primary);
  letter-spacing: -0.28px;
  line-height: 16px;
  outline: none;
  padding: 12px;
  min-height: 40px;
  max-height: 140px;
  overflow-y: auto;
  caret-color: var(--content-accent);
}

.copilot-editable:empty::before {
  content: 'Ask anything…';
  color: var(--content-quartenary);
  pointer-events: none;
}

.copilot-input.multiline {
  flex-direction: column;
  align-items: stretch;
  padding: 0 0 6px;
  gap: 0;
}

.copilot-input.multiline .copilot-editable {
  flex: none;
  width: 100%;
}

.copilot-input.multiline .copilot-send-btn {
  align-self: flex-end;
  margin-right: 6px;
}

.copilot-input.is-shake {
  animation: composer-shake 0.35s ease;
}

.copilot-suggestions {
  display: flex;
  padding: 0 8px 8px;
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;
  max-height: 200px;
  opacity: 1;
  transition: max-height 0.2s ease, opacity 0.15s ease, padding 0.2s ease;
}

.copilot-suggestions.is-hidden {
  max-height: 0;
  opacity: 0;
  padding: 0;
  pointer-events: none;
  overflow: hidden;
}

.copilot-suggestion > img {
  filter: var(--icon-filter);
}

.copilot-suggestion {
  flex-shrink: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  font-family: var(--font-family);
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  letter-spacing: -0.28px;
  font-variant-numeric: lining-nums proportional-nums;
  color: var(--content-tertiary);
  border: none;
  border-radius: 8px;
  background: transparent;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.1s ease;
}

.copilot-suggestion:hover {
  background: var(--button-ghosthover);
}


/* ─── Details panel ─────────────────────────────────────── */
#copilot-panel-details {
  flex-direction: column;
  overflow-y: auto;
}

.det-section {
  border-bottom: 1px solid var(--stroke-primary);
}

.det-section-header {
  padding: 12px 8px 4px;
  transition: padding-bottom 0.22s ease;
}

.det-collapsed .det-section-header {
  padding-bottom: 12px;
}

.det-section-content {
  overflow: hidden;
  transition: height 0.22s ease;
}

.det-collapsed .det-section-content {
  height: 0;
}

.det-section-inner {
  display: flex;
  flex-direction: column;
  padding: 0 8px 8px 16px;
}


/* ─── Icon helpers ──────────────────────────────────────── */
svg { fill: none; }
